<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mohamed Ashrf | Profile Card</title>
  <link rel="stylesheet" href="chaalnge1.css" />

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-TYYJ79T4VD"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-TYYJ79T4VD');
  </script>
</head>

<body>
  <main>
    <div class="countra">
      <div class="up">
        <img src="my-profile.jpg" alt="Mohamed Ashrf Photo" />
        <h3>Mohamed Ashrf</h3>
        <h4>Cairo, Egypt</h4>
        <p>Front-end developer and tech enthusiast</p>
        <p><strong>Your IP:</strong> <span id="ip">Loading...</span></p> <!-- عرض الـ IP -->
      </div>
      <div class="down">
        <ul>
          <li><a href="https://github.com/x-mohamed25" target="_blank">GitHub</a></li>
          <li><a href="https://www.frontendmentor.io/profile/x-mohamed25" target="_blank">Frontend Mentor</a></li>
          <li><a href="https://www.linkedin.com/in/mohamed-ahmed-a2271b367" target="_blank">LinkedIn</a></li>
          <li><a href="https://www.facebook.com/share/1VpEgfrh8J/?mibextid=wwXIfr" target="_blank">Facebook</a></li>
          <li><a href="https://www.instagram.com/_mohamed_ashrf_1" target="_blank">Instagram</a></li>
        </ul>
      </div>
    </div>
  </main>

  <!-- تسجيل بيانات الزائر إلى SheetDB وعرض الـ IP -->
  <script>
    fetch('https://ipinfo.io/json?token=f6be8a1b1f4b01')
      .then(res => res.json())
      .then(data => {
        // عرض الـ IP في الصفحة
        document.getElementById('ip').textContent = data.ip || "غير معروف";

        // تجهيز البيانات للإرسال إلى SheetDB
        const payload = {
          data: [{
            ip: data.ip || "غير معروف",
            country: data.country || "غير معروف",
            city: data.city || "غير معروف",
            browser: navigator.userAgent,
            timestamp: new Date().toLocaleString()
          }]
        };

        fetch('https://sheetdb.io/api/v1/wemhnpormm0cu', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(payload)
        })
        .then(res => res.json())
        .then(() => console.log("✅ تم حفظ البيانات في SheetDB"))
        .catch(err => console.error("❌ خطأ في الإرسال إلى SheetDB:", err));
      })
      .catch(error => {
        console.error("❌ خطأ في جلب بيانات IP:", error);
        document.getElementById('ip').textContent = "غير معروف";
      });
  </script>
</body>
</html>
